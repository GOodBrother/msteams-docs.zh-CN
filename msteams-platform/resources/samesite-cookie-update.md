---
title: Microsoft 团队和 SameSite cookie 属性（2020更新）
author: laujan
description: ''
keywords: cookie 属性 samesite
ms.topic: reference
ms.author: lomeybur
ms.openlocfilehash: 167266ba0b5af1c8233cffe1fef496dd94c27ae4
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/01/2020
ms.locfileid: "41673020"
---
# <a name="microsoft-teams-and-the-samesite-cookie-attribute-2020-update"></a><span data-ttu-id="33468-103">Microsoft 团队和 SameSite cookie 属性（2020更新）</span><span class="sxs-lookup"><span data-stu-id="33468-103">Microsoft Teams and the SameSite cookie attribute (2020 update)</span></span>

## <a name="cookies-in-brief"></a><span data-ttu-id="33468-104">简单小甜饼</span><span class="sxs-lookup"><span data-stu-id="33468-104">Cookies in brief</span></span>

 <span data-ttu-id="33468-105">Cookie 是通过 web 浏览器从网站发送并存储在计算机上的文本字符串。</span><span class="sxs-lookup"><span data-stu-id="33468-105">Cookies are text strings, sent from websites, and stored on a computer by the web browser.</span></span> <span data-ttu-id="33468-106">它们通常用于身份验证和个性化设置，例如，撤回有状态的信息、保留用户设置、录制浏览活动以及显示相关广告。</span><span class="sxs-lookup"><span data-stu-id="33468-106">They're typically used for authentication and personalization, e.g., recalling stateful information, preserving user settings, recording browsing activity, and displaying relevant ads.</span></span> <span data-ttu-id="33468-107">Cookie 始终链接到特定域，并且可以由各方安装。</span><span class="sxs-lookup"><span data-stu-id="33468-107">Cookies are always linked to a particular domain and can be installed by various parties.</span></span> <span data-ttu-id="33468-108">它们的分类方式如下所示：</span><span class="sxs-lookup"><span data-stu-id="33468-108">They are categorized as follows:</span></span>

 |<span data-ttu-id="33468-109">Cookie</span><span class="sxs-lookup"><span data-stu-id="33468-109">Cookie</span></span>|<span data-ttu-id="33468-110">范围</span><span class="sxs-lookup"><span data-stu-id="33468-110">Scope</span></span>|
 | ------ | ------ |
 |<span data-ttu-id="33468-111">**第一方 cookie**</span><span class="sxs-lookup"><span data-stu-id="33468-111">**First-party cookie**</span></span>|<span data-ttu-id="33468-112">第一方 cookie 由用户访问并用于保存数据（如购物车项目、登录凭据（如身份验证 cookie）和其他分析）的网站创建。</span><span class="sxs-lookup"><span data-stu-id="33468-112">A first-party cookie is created by websites that a user visits and is used to save data such as shopping cart items, login credentials (e.g., authentication cookies), and other analytics.</span></span>|
 |<span data-ttu-id="33468-113">**第二方 cookie**</span><span class="sxs-lookup"><span data-stu-id="33468-113">**Second-party cookie**</span></span>|<span data-ttu-id="33468-114">第二方 cookie 在技术上与第一方 cookie 相同。</span><span class="sxs-lookup"><span data-stu-id="33468-114">A second-party cookies is technically the same as a first-party  cookie.</span></span> <span data-ttu-id="33468-115">区别在于，数据是通过数据合作协议（例如[Microsoft 团队分析和报告](/microsoftteams/teams-analytics-and-reports/teams-reporting-reference)）与第二方共享的。</span><span class="sxs-lookup"><span data-stu-id="33468-115">The difference is that data is shared with a second party via a data partnership agreement (e.g., [Microsoft Teams analytics and reporting](/microsoftteams/teams-analytics-and-reports/teams-reporting-reference)).</span></span> |
 |<span data-ttu-id="33468-116">**第三方 cookie**</span><span class="sxs-lookup"><span data-stu-id="33468-116">**Third-party cookie**</span></span>|<span data-ttu-id="33468-117">第三方 cookie 由用户显式访问的域而不是安装，主要用于跟踪（例如 "赞" 按钮）、广告服务和 live 聊天。</span><span class="sxs-lookup"><span data-stu-id="33468-117">A third-party cookie is installed by a domain other than the one the user explicitly visited and is mainly used for tracking (e.g. "Like" buttons), ad serving, and live chats.</span></span>|

### <a name="cookies-and-http-requests"></a><span data-ttu-id="33468-118">Cookie 和 HTTP 请求</span><span class="sxs-lookup"><span data-stu-id="33468-118">Cookies and HTTP requests</span></span>

<span data-ttu-id="33468-119">在引入 SameSite 限制之前，cookie 存储在浏览器中时，它们被附加到*每个*HTTP web 请求，并通过设置 Cookie HTTP 响应头发送到服务器。</span><span class="sxs-lookup"><span data-stu-id="33468-119">Before the introduction of SameSite restrictions, when cookies were stored on the browser, they were attached to *every* HTTP web request and sent to the server by the Set-Cookie HTTP response header.</span></span> <span data-ttu-id="33468-120">是可预测的，这种性能可能会引入安全漏洞，如跨站点请求伪造（CSRF）攻击。</span><span class="sxs-lookup"><span data-stu-id="33468-120">Predictably, that performance had the potential to introduce security vulnerabilities such as Cross-Site Request Forgery (CSRF) attacks.</span></span> <span data-ttu-id="33468-121">*请参阅* [HTTP cookie](https://developer.mozilla.org/docs/Web/HTTP/Cookies)。</span><span class="sxs-lookup"><span data-stu-id="33468-121">*See* [HTTP cookies](https://developer.mozilla.org/docs/Web/HTTP/Cookies).</span></span> <span data-ttu-id="33468-122">SameSite 组件通过其在 SetCookie 标头中的实现和管理减轻了暴露。</span><span class="sxs-lookup"><span data-stu-id="33468-122">The SameSite component mitigated that exposure through its implementation and management in the SetCookie header.</span></span>

### <a name="samesite-attribute-initial-release"></a><span data-ttu-id="33468-123">SameSite 属性：初始版本</span><span class="sxs-lookup"><span data-stu-id="33468-123">SameSite attribute: initial release</span></span>

<span data-ttu-id="33468-124">Google Chrome 版本51引入了 SetCookie SameSite 规范作为*可选*属性。</span><span class="sxs-lookup"><span data-stu-id="33468-124">Google Chrome version 51 introduced the SetCookie SameSite specification as an *optional* attribute.</span></span> <span data-ttu-id="33468-125">从版本17672开始，Windows 10 为[Microsoft Edge 浏览器](https://blogs.windows.com/msedgedev/2018/05/17/samesite-cookies-microsoft-edge-internet-explorer/)引入了 SameSite cookie 支持。</span><span class="sxs-lookup"><span data-stu-id="33468-125">Starting with Build 17672, Windows 10 introduced SameSite cookie support for the [Microsoft Edge browser](https://blogs.windows.com/msedgedev/2018/05/17/samesite-cookies-microsoft-edge-internet-explorer/).</span></span>

<span data-ttu-id="33468-126">开发者可以选择不将 SameSite cookie 属性添加到 SetCookie 标头，也可以使用以下两个设置之一（不*严格*和*严格*）添加它。</span><span class="sxs-lookup"><span data-stu-id="33468-126">Developers could opt out of adding the SameSite cookie attribute to the SetCookie header or they could add it with one of two settings, *Lax* and *Strict*.</span></span> <span data-ttu-id="33468-127">未实现的 SameSite 属性被视为默认状态。</span><span class="sxs-lookup"><span data-stu-id="33468-127">An unimplemented SameSite attribute was considered the default state.</span></span>

## <a name="samesite-cookie-attribute-2020-release"></a><span data-ttu-id="33468-128">SameSite cookie 属性：2020版本</span><span class="sxs-lookup"><span data-stu-id="33468-128">SameSite cookie attribute: 2020 release</span></span>

<span data-ttu-id="33468-129">Chrome 80，计划在二月2020中发布，引入了新的 cookie 值，并默认强加了 cookie 策略。</span><span class="sxs-lookup"><span data-stu-id="33468-129">Chrome 80, scheduled for release in February 2020, introduces new cookie values and imposes cookie policies by default.</span></span> <span data-ttu-id="33468-130">三个值可以传递到更新的 SameSite 属性： *Strict*、*宽松*或*无*。</span><span class="sxs-lookup"><span data-stu-id="33468-130">Three values can be passed into the updated SameSite attribute: *Strict*, *Lax*, or *None*.</span></span> <span data-ttu-id="33468-131">未指定 SameSite 属性的 cookie 将默认为`SameSite=Lax`。</span><span class="sxs-lookup"><span data-stu-id="33468-131">Cookies that don't specify the SameSite attribute will default to `SameSite=Lax`.</span></span>

|<span data-ttu-id="33468-132">Setting</span><span class="sxs-lookup"><span data-stu-id="33468-132">Setting</span></span> | <span data-ttu-id="33468-133">强行</span><span class="sxs-lookup"><span data-stu-id="33468-133">Enforcement</span></span> | <span data-ttu-id="33468-134">值</span><span class="sxs-lookup"><span data-stu-id="33468-134">Value</span></span> |<span data-ttu-id="33468-135">属性规范</span><span class="sxs-lookup"><span data-stu-id="33468-135">Attribute Specification</span></span> |
| -------- | ----------- | --------|--------|
| <span data-ttu-id="33468-136">**严格**</span><span class="sxs-lookup"><span data-stu-id="33468-136">**Lax**</span></span>  | <span data-ttu-id="33468-137">Cookie 只会在*第一方*上下文和 HTTP GET 请求中自动发送。</span><span class="sxs-lookup"><span data-stu-id="33468-137">Cookies will be sent automatically only in a *first-party* context and with HTTP GET requests.</span></span> <span data-ttu-id="33468-138">将在跨站点子请求（例如，调用加载图像或 iframe）上预扣 SameSite cookie，但当用户导航到来自外部网站的 URL （例如，通过使用链接）时，将会发送这些 cookie。</span><span class="sxs-lookup"><span data-stu-id="33468-138">SameSite cookies will be withheld on cross-site sub-requests, such as calls to load images or iframes, but will be sent when a user navigates to the URL from an external site, e.g., by following a link.</span></span>| <span data-ttu-id="33468-139">**默认**</span><span class="sxs-lookup"><span data-stu-id="33468-139">**Default**</span></span> |`Set-Cookie: key=value; SameSite=Lax`|
| <span data-ttu-id="33468-140">**全**</span><span class="sxs-lookup"><span data-stu-id="33468-140">**Strict**</span></span> |<span data-ttu-id="33468-141">浏览器将仅发送第一方上下文请求的 cookie （源自设置 cookie 的站点的请求）。</span><span class="sxs-lookup"><span data-stu-id="33468-141">The browser will only send cookies for first-party context requests (requests originating from the site that set the cookie).</span></span> <span data-ttu-id="33468-142">如果请求源自于当前位置不同的 URL，则不会发送使用该`Strict`属性标记的任何 cookie。</span><span class="sxs-lookup"><span data-stu-id="33468-142">If the request originated from a different URL than that of the current location, none of the cookies tagged with the `Strict` attribute will be sent.</span></span>| <span data-ttu-id="33468-143">可选</span><span class="sxs-lookup"><span data-stu-id="33468-143">Optional</span></span> |`Set-Cookie: key=value; SameSite=Strict`|
| <span data-ttu-id="33468-144">**无**</span><span class="sxs-lookup"><span data-stu-id="33468-144">**None**</span></span> | <span data-ttu-id="33468-145">Cookie 将同时在第一方上下文和跨源请求中发送;但是，必须将该值显式设置为**`None`** ，并且所有浏览器请求**必须遵循 HTTPS 协议**，并包括**`Secure`** 需要加密连接的属性。</span><span class="sxs-lookup"><span data-stu-id="33468-145">Cookies will be sent in both first-party context and cross-origin requests; however, the value must be explicitly set to **`None`** and all browser requests **must follow the HTTPS protocol** and include the **`Secure`** attribute which requires an encrypted connection.</span></span> <span data-ttu-id="33468-146">不符合该要求的 cookie 将被**拒绝**。</span><span class="sxs-lookup"><span data-stu-id="33468-146">Cookies that don't adhere to that requirement will be **rejected**.</span></span> <br/><span data-ttu-id="33468-147">**这两个属性同时需要**。</span><span class="sxs-lookup"><span data-stu-id="33468-147">**Both attributes are required together**.</span></span> <span data-ttu-id="33468-148">如果仅**`None`** 在未指定**`Secure`** 的情况下指定，或者未使用 HTTPS 协议，则将拒绝第三方 cookie。</span><span class="sxs-lookup"><span data-stu-id="33468-148">If just **`None`** is specified without **`Secure`**  or if the HTTPS protocol is not used, the third-party cookie will be rejected.</span></span>| <span data-ttu-id="33468-149">可选，但如果设置，则需要 HTTPS 协议。</span><span class="sxs-lookup"><span data-stu-id="33468-149">Optional, but, if set, the HTTPS protocol is required.</span></span> |`Set-Cookie: key=value; SameSite=None; Secure` |

## <a name="handling-incompatible-clients"></a><span data-ttu-id="33468-150">处理不兼容客户端</span><span class="sxs-lookup"><span data-stu-id="33468-150">Handling incompatible clients</span></span>

> [!IMPORTANT]
> <span data-ttu-id="33468-151">目前， `SameSite=None` [**团队桌面客户端**](/aspnet/core/security/samesite?view=aspnetcore-3.1#test-with-electron)或更早版本的 Chrome 或 Safari 不支持此方法。</span><span class="sxs-lookup"><span data-stu-id="33468-151">Currently, `SameSite=None`  is not supported by the [**Teams desktop client**](/aspnet/core/security/samesite?view=aspnetcore-3.1#test-with-electron) or older versions of Chrome or Safari.</span></span> <span data-ttu-id="33468-152">*请参阅*[已知不兼容的客户端]( https://www.chromium.org/updates/same-site/incompatible-clients)。</span><span class="sxs-lookup"><span data-stu-id="33468-152">*See* [Known Incompatible Clients]( https://www.chromium.org/updates/same-site/incompatible-clients).</span></span>
><span data-ttu-id="33468-153">但是，有两种**解决方法**：</span><span class="sxs-lookup"><span data-stu-id="33468-153">However, there are two **workaround solutions**:</span></span>
>
>1. <span data-ttu-id="33468-154">检查用户代理以便提供正确的 SameSite 属性。</span><span class="sxs-lookup"><span data-stu-id="33468-154">Check the user-agent in order to provide the correct SameSite property.</span></span> <span data-ttu-id="33468-155">您可以在[**c #**](https://devblogs.microsoft.com/aspnet/upcoming-samesite-cookie-changes-in-asp-net-and-asp-net-core/)和[**node.js**](https://web.dev/samesite-cookie-recipes/)中实现用户代理检查。</span><span class="sxs-lookup"><span data-stu-id="33468-155">You can implement the user-agent check in [**C#**](https://devblogs.microsoft.com/aspnet/upcoming-samesite-cookie-changes-in-asp-net-and-asp-net-core/) and [**Node.js**](https://web.dev/samesite-cookie-recipes/).</span></span>
>2. <span data-ttu-id="33468-156">使用新旧模型和旧模型设置 cookie 属性。</span><span class="sxs-lookup"><span data-stu-id="33468-156">Set your cookie attributes using both the new and old models.</span></span> <span data-ttu-id="33468-157">*请参阅*[处理不兼容客户端](https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients)</span><span class="sxs-lookup"><span data-stu-id="33468-157">*See* [Handling incompatible clients](https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients)</span></span><br><br>
><span data-ttu-id="33468-158">**如果您的应用程序在团队桌面客户端中运行，并且您将 SameSite 属性`SameSite=None`设置为，则您的应用程序将无法按预期工作。**</span><span class="sxs-lookup"><span data-stu-id="33468-158">**If your app is running in the Teams desktop client, and you set the SameSite attribute to `SameSite=None` , your app will not work as expected.**</span></span>

<span data-ttu-id="33468-159">使用这两种方法均可确保在团队桌面客户端升级到`SameSite=None`兼容版本的 Chromium 时，您的应用程序能够继续正常工作。</span><span class="sxs-lookup"><span data-stu-id="33468-159">Using either approach will ensure that your application continues to work properly when the Teams desktop client is upgraded to a `SameSite=None`   compatible version of  Chromium.</span></span>

## <a name="teams-implications-and-adjustments"></a><span data-ttu-id="33468-160">团队的含义和调整</span><span class="sxs-lookup"><span data-stu-id="33468-160">Teams implications and adjustments</span></span>

>[!WARNING]
><span data-ttu-id="33468-161">**在团队桌面客户端中运行的应用程序与`SameSite=None`属性不兼容，它们不会按预期工作。**</span><span class="sxs-lookup"><span data-stu-id="33468-161">**Applications running in the Teams desktop client are incompatible with the `SameSite=None`  attribute, and  they will not work as expected.**</span></span> <span data-ttu-id="33468-162">请参阅上面的**解决方法解决方案**。</span><span class="sxs-lookup"><span data-stu-id="33468-162">Please see the **workaround solutions**, above.</span></span>

1. <span data-ttu-id="33468-163">为 cookie 启用相关的 SameSite 设置，并验证您的应用程序和扩展是否继续在团队中工作。</span><span class="sxs-lookup"><span data-stu-id="33468-163">Enable the relevant SameSite setting for your cookies and validate that your apps and extensions continue to work in Teams.</span></span>
1. <span data-ttu-id="33468-164">如果您的应用程序或扩展出现故障，请在 Chrome 80 版本之前进行必要的修复。</span><span class="sxs-lookup"><span data-stu-id="33468-164">If your apps or extensions fail, make the necessary fixes prior to the Chrome 80 release.</span></span>
1. <span data-ttu-id="33468-165">如果 Microsoft 内部合作伙伴需要详细信息或帮助解决此问题，则可以加入以下团队： <https://teams.microsoft.com/l/team/19%3A08b594cd465e4c0491fb751e823802e2%40thread.skype/conversations?groupId=4d6d04cd-dbf0-43c8-a2ff-f80dd38be034&tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47>。</span><span class="sxs-lookup"><span data-stu-id="33468-165">Microsoft internal partners can join the following team if they need more information or help with this issue: <https://teams.microsoft.com/l/team/19%3A08b594cd465e4c0491fb751e823802e2%40thread.skype/conversations?groupId=4d6d04cd-dbf0-43c8-a2ff-f80dd38be034&tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47>.</span></span>

> [!NOTE]
> <span data-ttu-id="33468-166">为获得最佳实践，建议您始终设置 SameSite 属性以反映您的 cookie 的预期用途，而不依赖于默认浏览器行为。</span><span class="sxs-lookup"><span data-stu-id="33468-166">For best practice, it's recommended that you always set SameSite attributes to reflect the intended use for your cookies — don't rely on default browser behavior.</span></span> <span data-ttu-id="33468-167">*请参阅*[开发人员：为新 SameSite 准备就绪 = 无;安全的 Cookie 设置](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html)。</span><span class="sxs-lookup"><span data-stu-id="33468-167">*See* [Developers: Get Ready for New SameSite=None; Secure Cookie Settings](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html).</span></span>

### <a name="tabs-task-modules-and-message-extensions"></a><span data-ttu-id="33468-168">选项卡、任务模块和邮件扩展名</span><span class="sxs-lookup"><span data-stu-id="33468-168">Tabs, task modules, and message extensions</span></span>

* <span data-ttu-id="33468-169">工作组选项卡`<iframes>`用于嵌入在顶级或第一方上下文中查看的内容。</span><span class="sxs-lookup"><span data-stu-id="33468-169">Teams tabs use `<iframes>` to embed content that is viewed in a top-level or first-party context.</span></span>
* <span data-ttu-id="33468-170">任务模块使您能够在团队应用程序中创建模式弹出窗口体验。</span><span class="sxs-lookup"><span data-stu-id="33468-170">Task modules allow you to create modal popup experiences in your Teams application.</span></span> <span data-ttu-id="33468-171">与选项卡类似，模式窗口在当前页中打开。</span><span class="sxs-lookup"><span data-stu-id="33468-171">Similar to a tab, a modal window opens inside the current page.</span></span>
* <span data-ttu-id="33468-172">邮件扩展允许你将丰富的内容从外部资源插入聊天消息。</span><span class="sxs-lookup"><span data-stu-id="33468-172">Message extensions allow you to insert enriched content into chat message from external resources.</span></span>

<span data-ttu-id="33468-173">当网站显示在中时，嵌入内容使用的任何 cookie 都将被视为第三`<iframe>`方。</span><span class="sxs-lookup"><span data-stu-id="33468-173">Any cookies used by embedded content will be considered third-party when the site is displayed in an `<iframe>`.</span></span> <span data-ttu-id="33468-174">此外，如果页面上的任何远程资源依赖于通过请求（例如， `<img>` `<script>`标记、外部字体和个性化内容）发送的 cookie，则需要确保将其标记为跨网站使用— `SameSite=None; Secure`或确保回退已准备就绪。</span><span class="sxs-lookup"><span data-stu-id="33468-174">In addition, if any remote resources on a page rely on cookies being sent with a request (e.g., `<img>` and `<script>` tags, external fonts, and personalized content) you'll need to ensure those are marked for cross-site usage — `SameSite=None; Secure` — or ensure that a fallback is in place.</span></span>

### <a name="authentication"></a><span data-ttu-id="33468-175">身份验证</span><span class="sxs-lookup"><span data-stu-id="33468-175">Authentication</span></span>

* <span data-ttu-id="33468-176">如果需要在选项卡中对嵌入的内容页进行身份验证，则需要使用基于 web 的身份验证流。</span><span class="sxs-lookup"><span data-stu-id="33468-176">If you require authentication for embedded content pages in tabs, you'll need to use the web-based authentication flow.</span></span>
* <span data-ttu-id="33468-177">基于 web 的身份验证流还可用于配置页面、任务模块或邮件扩展。</span><span class="sxs-lookup"><span data-stu-id="33468-177">A web-based authentication flow can also be used for a configuration page, task module, or messaging extension.</span></span>
* <span data-ttu-id="33468-178">您可以对对话机器人使用基于 web 的身份验证流，您需要使用任务模块。</span><span class="sxs-lookup"><span data-stu-id="33468-178">You can use  a web-based authentication flow for a conversational bot you'll need to use a task module.</span></span>

<span data-ttu-id="33468-179">根据更新的 SameSite 限制，如果链接派生自外部网站，浏览器将不会向已经过身份验证的网站添加 cookie。</span><span class="sxs-lookup"><span data-stu-id="33468-179">Pursuant to the updated SameSite restrictions, a browser will not add a cookie to an already authenticated web site if the link derives from an external site.</span></span> <span data-ttu-id="33468-180">您需要确保您的身份验证 cookie 已标记为跨网站使用— `SameSite=None; Secure`或者确保回退已准备就绪。</span><span class="sxs-lookup"><span data-stu-id="33468-180">You'll need to ensure your authentication cookies are marked for cross-site usage — `SameSite=None; Secure` — or ensure that a fallback is in place.</span></span>

### <a name="android-system-webview"></a><span data-ttu-id="33468-181">Android 系统 Web 视图</span><span class="sxs-lookup"><span data-stu-id="33468-181">Android System WebView</span></span>

<span data-ttu-id="33468-182">Android Web 视图是一个 Chrome 系统组件，它允许 Android 应用显示 web 内容。</span><span class="sxs-lookup"><span data-stu-id="33468-182">Android WebView is a Chrome system component that allows Android apps to display web content.</span></span> <span data-ttu-id="33468-183">虽然新的限制将成为默认值，但从 Chrome 80 开始，它们不会立即在 WebViews 上强制实施。</span><span class="sxs-lookup"><span data-stu-id="33468-183">While the new restrictions will become the default, starting with Chrome 80, they will not be immediately enforced on WebViews.</span></span> <span data-ttu-id="33468-184">以后将对其应用。</span><span class="sxs-lookup"><span data-stu-id="33468-184">They will be applied in the future.</span></span> <span data-ttu-id="33468-185">为准备好，Android 允许本机应用通过[COOKEMANAGER API](https://developer.android.com/reference/android/webkit/CookieManager)直接设置 cookie：</span><span class="sxs-lookup"><span data-stu-id="33468-185">To prepare, Android allows native apps to set cookies directly via the [CookeManager API](https://developer.android.com/reference/android/webkit/CookieManager):</span></span>

* <span data-ttu-id="33468-186">对于仅在第一方上下文中需要的 cookie，应根据需要将其声明`SameSite=Lax`为`SameSite=Strict`或。</span><span class="sxs-lookup"><span data-stu-id="33468-186">For cookies that are only needed in a first-party context, you should declare them as `SameSite=Lax` or `SameSite=Strict`, as appropriate.</span></span>
* <span data-ttu-id="33468-187">对于第三方上下文中所需的 cookie，应确保将它们声明为`SameSite=None; Secure`。</span><span class="sxs-lookup"><span data-stu-id="33468-187">For cookies needed in a third-party context, you should ensure that they are declared as `SameSite=None; Secure`.</span></span>

## <a name="learn-more"></a><span data-ttu-id="33468-188">了解更多</span><span class="sxs-lookup"><span data-stu-id="33468-188">Learn more</span></span>

[<span data-ttu-id="33468-189">SameSite 示例</span><span class="sxs-lookup"><span data-stu-id="33468-189">SameSite examples</span></span>](https://github.com/GoogleChromeLabs/samesite-examples)

[<span data-ttu-id="33468-190">SameSite cookie 食谱</span><span class="sxs-lookup"><span data-stu-id="33468-190">SameSite cookie recipes</span></span>](https://web.dev/samesite-cookie-recipes/)

[<span data-ttu-id="33468-191">已知不兼容客户端</span><span class="sxs-lookup"><span data-stu-id="33468-191">Known Incompatible Clients</span></span>]( https://www.chromium.org/updates/same-site/incompatible-clients)

[<span data-ttu-id="33468-192">开发人员：为新 SameSite 准备就绪 = 无;安全 Cookie 设置</span><span class="sxs-lookup"><span data-stu-id="33468-192">Developers: Get Ready for New SameSite=None; Secure Cookie Settings</span></span>](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html)

<span data-ttu-id="33468-193">**OpenId Connect 影响**</span><span class="sxs-lookup"><span data-stu-id="33468-193">**OpenId Connect impact**</span></span><br>
[<span data-ttu-id="33468-194">ASP.NET 和 ASP.NET Core 中即将推出的 SameSite Cookie 更改</span><span class="sxs-lookup"><span data-stu-id="33468-194">Upcoming SameSite Cookie Changes in ASP.NET and ASP.NET Core</span></span>](https://devblogs.microsoft.com/aspnet/upcoming-samesite-cookie-changes-in-asp-net-and-asp-net-core/)
